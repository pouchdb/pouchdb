// PouchDBVersion801 indexeddb plugin 8.0.1
!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,(function(e){return o(t[s][1][e]||e)}),f,f.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){},{}],2:[function(e,t,n){var r=Object.create||function(e){var t=function(){};return t.prototype=e,new t},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},i=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function s(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0;var a,u=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),a=0===c.x}catch(e){a=!1}function f(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,n){if(t)e.call(n);else for(var r=e.length,o=w(e,r),i=0;i<r;++i)o[i].call(n)}function d(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=w(e,o),s=0;s<o;++s)i[s].call(n,r)}function h(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,s=w(e,i),a=0;a<i;++a)s[a].call(n,r,o)}function p(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var s=e.length,a=w(e,s),u=0;u<s;++u)a[u].call(n,r,o,i)}function v(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=w(e,o),s=0;s<o;++s)i[s].apply(n,r)}function y(e,t,n,o){var i,s,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]):(s=e._events=r(null),e._eventsCount=0),a){if("function"==typeof a?a=s[t]=o?[n,a]:[a,n]:o?a.unshift(n):a.push(n),!a.warned&&(i=f(e))&&i>0&&a.length>i){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=s[t]=n,++e._eventsCount;return e}function _(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function g(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=i.call(_,r);return o.listener=n,r.wrapFn=o,o}function m(e,t,n){var r=e._events;if(!r)return[];var o=r[t];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):w(o,o.length):[]}function b(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function w(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}a?Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');u=e}}):s.defaultMaxListeners=u,s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return f(this)},s.prototype.emit=function(e){var t,n,r,o,i,s,a="error"===e;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var u=new Error('Unhandled "error" event. ('+t+")");throw u.context=t,u}if(!(n=s[e]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:l(n,c,this);break;case 2:d(n,c,this,arguments[1]);break;case 3:h(n,c,this,arguments[1],arguments[2]);break;case 4:p(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];v(n,c,this,o)}return!0},s.prototype.addListener=function(e,t){return y(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return y(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,g(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,g(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,o,i,s,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(o=this._events))return this;if(!(n=o[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=r(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(o[e]=n[0]),o.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.removeAllListeners=function(e){var t,n,i;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=r(null):delete n[e]),this;if(0===arguments.length){var s,a=o(n);for(i=0;i<a.length;++i)"removeListener"!==(s=a[i])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return m(this,e,!0)},s.prototype.rawListeners=function(e){return m(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):b.call(e,t)},s.prototype.listenerCount=b,s.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],3:[function(e,t,n){"use strict";var r,o,i,s=[e(1),e(6),e(5),e(4),e(7),e(8)],a=-1,u=[],c=!1;function f(){r&&o&&(r=!1,o.length?u=o.concat(u):a=-1,u.length&&l())}function l(){if(!r){c=!1,r=!0;for(var e=u.length,t=setTimeout(f);e;){for(o=u,u=[];o&&++a<e;)o[a].run();a=-1,e=u.length}o=null,a=-1,r=!1,clearTimeout(t)}}for(var d=-1,h=s.length;++d<h;)if(s[d]&&s[d].test&&s[d].test()){i=s[d].install(l);break}function p(e,t){this.fun=e,this.array=t}p.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},t.exports=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),c||r||(c=!0,i())}},{1:1,4:4,5:5,6:6,7:7,8:8}],4:[function(e,t,n){(function(e){(function(){"use strict";n.test=function(){return!e.setImmediate&&void 0!==e.MessageChannel},n.install=function(t){var n=new e.MessageChannel;return n.port1.onmessage=t,function(){n.port2.postMessage(0)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){(function(e){(function(){"use strict";var t=e.MutationObserver||e.WebKitMutationObserver;n.test=function(){return t},n.install=function(n){var r=0,o=new t(n),i=e.document.createTextNode("");return o.observe(i,{characterData:!0}),function(){i.data=r=++r%2}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){(function(e){(function(){"use strict";n.test=function(){return"function"==typeof e.queueMicrotask},n.install=function(t){return function(){e.queueMicrotask(t)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){(function(e){(function(){"use strict";n.test=function(){return"document"in e&&"onreadystatechange"in e.document.createElement("script")},n.install=function(t){return function(){var n=e.document.createElement("script");return n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n),t}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){"use strict";n.test=function(){return!0},n.install=function(e){return function(){setTimeout(e,0)}}},{}],9:[function(e,t,n){!function(e){if("object"==typeof n)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var r;try{r=window}catch(e){r=self}r.SparkMD5=e()}}((function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],r=e[1],o=e[2],i=e[3];r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+t[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+t[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&n)+t[3]-1044525330|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+t[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+t[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&n)+t[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+t[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+t[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&n)+t[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+t[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+t[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&n)+t[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+t[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|o>>>18)+i|0)&n|i&~n)+t[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+t[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|o>>>18)+i|0)&n|i&~n)+t[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+t[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|o>>>18)+i|0)&n|i&~n)+t[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+t[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|o>>>18)+i|0)&n|i&~n)+t[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+t[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|o>>>16)+i|0)^i^n)+t[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+t[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|o>>>16)+i|0)^i^n)+t[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+t[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|o>>>16)+i|0)^i^n)+t[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+t[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|o>>>16)+i|0)^i^n)+t[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+t[7]+1126891415|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[14]-1416354905|0)<<15|o>>>17)+i|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+t[3]-1894986606|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[10]-1051523|0)<<15|o>>>17)+i|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+t[15]-30611744|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[6]-1560198380|0)<<15|o>>>17)+i|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+t[11]-1120210379|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[2]+718787259|0)<<15|o>>>17)+i|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+o|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function o(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var t,o,i,s,a,u,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)n(f,r(e.substring(t-64,t)));for(o=(e=e.substring(t-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<o;t+=1)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(n(f,i),t=0;t<16;t+=1)i[t]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,i[14]=a,i[15]=u,n(f,i),f}function s(e){var n,r="";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function u(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function c(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function f(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==a(i("hello"))&&function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var o,i,s,a,u=this.byteLength,c=t(n,u),f=u;return r!==e&&(f=t(r,u)),c>f?new ArrayBuffer(0):(o=f-c,i=new ArrayBuffer(o),s=new Uint8Array(i),a=new Uint8Array(this,c,o),s.set(a),i)}}(),f.prototype.append=function(e){return this.appendBinary(u(e)),this},f.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,o=this._buff.length;for(t=64;t<=o;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},f.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),n=a(this._hash),e&&(n=c(n)),this.reset(),n},f.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},f.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},f.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},f.prototype._finish=function(e,t){var r,o,i,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(n(this._hash,e),s=0;s<16;s+=1)e[s]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),i=parseInt(r[1],16)||0,e[14]=o,e[15]=i,n(this._hash,e)},f.hash=function(e,t){return f.hashBinary(u(e),t)},f.hashBinary=function(e,t){var n=a(i(e));return t?c(n):n},f.ArrayBuffer=function(){this.reset()},f.ArrayBuffer.prototype.append=function(e){var t,r,i,s,a,u=(r=this._buff.buffer,i=e,s=!0,(a=new Uint8Array(r.byteLength+i.byteLength)).set(new Uint8Array(r)),a.set(new Uint8Array(i),r.byteLength),s?a:a.buffer),c=u.length;for(this._length+=e.byteLength,t=64;t<=c;t+=64)n(this._hash,o(u.subarray(t-64,t)));return this._buff=t-64<c?new Uint8Array(u.buffer.slice(t-64)):new Uint8Array(0),this},f.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=r[t]<<(t%4<<3);return this._finish(i,o),n=a(this._hash),e&&(n=c(n)),this.reset(),n},f.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.ArrayBuffer.prototype.getState=function(){var e,t=f.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},f.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(n=0;n<r;n+=1)i[n]=e.charCodeAt(n);return t?i:o}(e.buff,!0),f.prototype.setState.call(this,e)},f.ArrayBuffer.prototype.destroy=f.prototype.destroy,f.ArrayBuffer.prototype._finish=f.prototype._finish,f.ArrayBuffer.hash=function(e,t){var r=a(function(e){var t,r,i,s,a,u,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)n(f,o(e.subarray(t-64,t)));for(r=(e=t-64<c?e.subarray(t-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)i[t>>2]|=e[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(n(f,i),t=0;t<16;t+=1)i[t]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,i[14]=a,i[15]=u,n(f,i),f}(new Uint8Array(e)));return t?c(r):r},f}))},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return l.default}});var r=d(e(18)),o=d(e(19)),i=d(e(21)),s=d(e(22)),a=d(e(12)),u=d(e(24)),c=d(e(23)),f=d(e(17)),l=d(e(13));function d(e){return e&&e.__esModule?e:{default:e}}},{12:12,13:13,17:17,18:18,19:19,21:21,22:22,23:23,24:24}],11:[function(e,t,n){"use strict";function r(e){return 14+(e+64>>>9<<4)+1}function o(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,r,i,s){return o((a=o(o(t,e),o(r,s)))<<(u=i)|a>>>32-u,n);var a,u}function s(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function u(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function c(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var f=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length;for(let r=0;r<n;r+=8){const n=e[r>>5]>>>r%32&255,o=parseInt("0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[r(t)-1]=t;let n=1732584193,i=-271733879,f=-1732584194,l=271733878;for(let t=0;t<e.length;t+=16){const r=n,d=i,h=f,p=l;n=s(n,i,f,l,e[t],7,-680876936),l=s(l,n,i,f,e[t+1],12,-389564586),f=s(f,l,n,i,e[t+2],17,606105819),i=s(i,f,l,n,e[t+3],22,-1044525330),n=s(n,i,f,l,e[t+4],7,-176418897),l=s(l,n,i,f,e[t+5],12,1200080426),f=s(f,l,n,i,e[t+6],17,-1473231341),i=s(i,f,l,n,e[t+7],22,-45705983),n=s(n,i,f,l,e[t+8],7,1770035416),l=s(l,n,i,f,e[t+9],12,-1958414417),f=s(f,l,n,i,e[t+10],17,-42063),i=s(i,f,l,n,e[t+11],22,-1990404162),n=s(n,i,f,l,e[t+12],7,1804603682),l=s(l,n,i,f,e[t+13],12,-40341101),f=s(f,l,n,i,e[t+14],17,-1502002290),i=s(i,f,l,n,e[t+15],22,1236535329),n=a(n,i,f,l,e[t+1],5,-165796510),l=a(l,n,i,f,e[t+6],9,-1069501632),f=a(f,l,n,i,e[t+11],14,643717713),i=a(i,f,l,n,e[t],20,-373897302),n=a(n,i,f,l,e[t+5],5,-701558691),l=a(l,n,i,f,e[t+10],9,38016083),f=a(f,l,n,i,e[t+15],14,-660478335),i=a(i,f,l,n,e[t+4],20,-405537848),n=a(n,i,f,l,e[t+9],5,568446438),l=a(l,n,i,f,e[t+14],9,-1019803690),f=a(f,l,n,i,e[t+3],14,-187363961),i=a(i,f,l,n,e[t+8],20,1163531501),n=a(n,i,f,l,e[t+13],5,-1444681467),l=a(l,n,i,f,e[t+2],9,-51403784),f=a(f,l,n,i,e[t+7],14,1735328473),i=a(i,f,l,n,e[t+12],20,-1926607734),n=u(n,i,f,l,e[t+5],4,-378558),l=u(l,n,i,f,e[t+8],11,-2022574463),f=u(f,l,n,i,e[t+11],16,1839030562),i=u(i,f,l,n,e[t+14],23,-35309556),n=u(n,i,f,l,e[t+1],4,-1530992060),l=u(l,n,i,f,e[t+4],11,1272893353),f=u(f,l,n,i,e[t+7],16,-155497632),i=u(i,f,l,n,e[t+10],23,-1094730640),n=u(n,i,f,l,e[t+13],4,681279174),l=u(l,n,i,f,e[t],11,-358537222),f=u(f,l,n,i,e[t+3],16,-722521979),i=u(i,f,l,n,e[t+6],23,76029189),n=u(n,i,f,l,e[t+9],4,-640364487),l=u(l,n,i,f,e[t+12],11,-421815835),f=u(f,l,n,i,e[t+15],16,530742520),i=u(i,f,l,n,e[t+2],23,-995338651),n=c(n,i,f,l,e[t],6,-198630844),l=c(l,n,i,f,e[t+7],10,1126891415),f=c(f,l,n,i,e[t+14],15,-1416354905),i=c(i,f,l,n,e[t+5],21,-57434055),n=c(n,i,f,l,e[t+12],6,1700485571),l=c(l,n,i,f,e[t+3],10,-1894986606),f=c(f,l,n,i,e[t+10],15,-1051523),i=c(i,f,l,n,e[t+1],21,-2054922799),n=c(n,i,f,l,e[t+8],6,1873313359),l=c(l,n,i,f,e[t+15],10,-30611744),f=c(f,l,n,i,e[t+6],15,-1560198380),i=c(i,f,l,n,e[t+13],21,1309151649),n=c(n,i,f,l,e[t+4],6,-145523070),l=c(l,n,i,f,e[t+11],10,-1120210379),f=c(f,l,n,i,e[t+2],15,718787259),i=c(i,f,l,n,e[t+9],21,-343485551),n=o(n,r),i=o(i,d),f=o(f,h),l=o(l,p)}return[n,i,f,l]}(function(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(r(t));for(let r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))};n.default=f},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default="00000000-0000-0000-0000-000000000000"},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e(23))&&r.__esModule?r:{default:r};var i=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};n.default=i},{23:23}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],15:[function(e,t,n){"use strict";let r;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)};const o=new Uint8Array(16)},{}],16:[function(e,t,n){"use strict";function r(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function o(e,t){return e<<t|e>>>32-t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,s=Math.ceil(i/16),a=new Array(s);for(let t=0;t<s;++t){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];a[t]=n}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<s;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=a[e][t];for(let e=16;e<80;++e)i[e]=o(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let s=n[0],u=n[1],c=n[2],f=n[3],l=n[4];for(let e=0;e<80;++e){const n=Math.floor(e/20),a=o(s,5)+r(n,u,c,f)+l+t[n]+i[e]>>>0;l=f,f=c,c=o(u,30)>>>0,u=s,s=a}n[0]=n[0]+s>>>0,n[1]=n[1]+u>>>0,n[2]=n[2]+c>>>0,n[3]=n[3]+f>>>0,n[4]=n[4]+l>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]};n.default=i},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e(23))&&r.__esModule?r:{default:r};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).substr(1));var s=function(e,t=0){const n=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!(0,o.default)(n))throw TypeError("Stringified UUID is invalid");return n};n.default=s},{23:23}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e(15)),o=i(e(17));function i(e){return e&&e.__esModule?e:{default:e}}let s,a,u=0,c=0;var f=function(e,t,n){let i=t&&n||0;const f=t||new Array(16);let l=(e=e||{}).node||s,d=void 0!==e.clockseq?e.clockseq:a;if(null==l||null==d){const t=e.random||(e.rng||r.default)();null==l&&(l=s=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=a=16383&(t[6]<<8|t[7]))}let h=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:c+1;const v=h-u+(p-c)/1e4;if(v<0&&void 0===e.clockseq&&(d=d+1&16383),(v<0||h>u)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=h,c=p,a=d,h+=122192928e5;const y=(1e4*(268435455&h)+p)%4294967296;f[i++]=y>>>24&255,f[i++]=y>>>16&255,f[i++]=y>>>8&255,f[i++]=255&y;const _=h/4294967296*1e4&268435455;f[i++]=_>>>8&255,f[i++]=255&_,f[i++]=_>>>24&15|16,f[i++]=_>>>16&255,f[i++]=d>>>8|128,f[i++]=255&d;for(let e=0;e<6;++e)f[i+e]=l[e];return t||(0,o.default)(f)};n.default=f},{15:15,17:17}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e(20)),o=i(e(11));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v3",48,o.default);n.default=s},{11:11,20:20}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){function i(e,i,s,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof i&&(i=(0,o.default)(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(i),u.set(e,i.length),u=n(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,s){a=a||0;for(let e=0;e<16;++e)s[a+e]=u[e];return s}return(0,r.default)(u)}try{i.name=e}catch(e){}return i.DNS=s,i.URL=a,i},n.URL=n.DNS=void 0;var r=i(e(17)),o=i(e(13));function i(e){return e&&e.__esModule?e:{default:e}}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";n.DNS=s;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n.URL=a},{13:13,17:17}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e(15)),o=i(e(17));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,n){const i=(e=e||{}).random||(e.rng||r.default)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return(0,o.default)(i)};n.default=s},{15:15,17:17}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e(20)),o=i(e(16));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v5",80,o.default);n.default=s},{16:16,20:20}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e(14))&&r.__esModule?r:{default:r};var i=function(e){return"string"==typeof e&&o.default.test(e)};n.default=i},{14:14}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e(23))&&r.__esModule?r:{default:r};var i=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)};n.default=i},{23:23}],25:[function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var o=r(e(3)),i=r(e(2)),s=e(10),a=r(e(9));function u(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}var c,f=Function.prototype.toString,l=f.call(Object);function d(e){var t,n,r;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=d(e[n]);return t}if(e instanceof Date&&isFinite(e))return e.toISOString();if(function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}(e))return u(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&f.call(n)==l}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=d(e[n]);void 0!==o&&(t[n]=o)}return t}function h(e){return"$"+e}function p(e){return e.substring(1)}function v(){this._store={}}function y(e){if(this._store=new v,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}v.prototype.get=function(e){var t=h(e);return this._store[t]},v.prototype.set=function(e,t){var n=h(e);return this._store[n]=t,!0},v.prototype.has=function(e){return h(e)in this._store},v.prototype.keys=function(){return Object.keys(this._store).map(e=>p(e))},v.prototype.delete=function(e){var t=h(e),n=t in this._store;return delete this._store[t],n},v.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var o=t[n];e(this._store[o],o=p(o))}},Object.defineProperty(v.prototype,"size",{get:function(){return Object.keys(this._store).length}}),y.prototype.add=function(e){return this._store.set(e,!0)},y.prototype.has=function(e){return this._store.has(e)},y.prototype.forEach=function(e){this._store.forEach((function(t,n){e(n)}))},Object.defineProperty(y.prototype,"size",{get:function(){return this._store.size}});try{localStorage.setItem("_pouch_check_localstorage",1),c=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){c=!1}function _(){return c}var g="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t};class m extends Error{constructor(e,t,n){super(),this.status=e,this.name=t,this.message=n,this.error=!0}toString(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})}}new m(401,"unauthorized","Name or password is incorrect."),new m(400,"bad_request","Missing JSON list of 'docs'");var b=new m(404,"not_found","missing"),w=new m(409,"conflict","Document update conflict"),A=new m(400,"bad_request","_id field must contain a string"),O=new m(412,"missing_id","_id is required for puts"),j=new m(400,"bad_request","Only reserved document ids may start with underscore."),x=(new m(412,"precondition_failed","Database not open"),new m(500,"unknown_error","Database encountered an unknown error")),k=new m(500,"badarg","Some query argument is invalid"),B=(new m(400,"invalid_request","Request was invalid"),new m(400,"query_parse_error","Some query parameter is invalid"),new m(500,"doc_validation","Bad special document member")),S=new m(400,"bad_request","Something wrong with the request"),I=(new m(400,"bad_request","Document must be a JSON object"),new m(404,"not_found","Database not found"),new m(500,"indexed_db_went_bad","unknown")),P=(new m(500,"web_sql_went_bad","unknown"),new m(500,"levelDB_went_went_bad","unknown"),new m(403,"forbidden","Forbidden by design doc validate_doc_update function"),new m(400,"bad_request","Invalid rev format")),C=(new m(412,"file_exists","The database could not be created, the file already exists."),new m(412,"missing_stub","A pre-existing attachment stub wasn't found"));new m(413,"invalid_url","Provided URL is invalid");function E(e,t){function n(t){for(var n=Object.getOwnPropertyNames(e),r=0,o=n.length;r<o;r++)"function"!=typeof e[n[r]]&&(this[n[r]]=e[n[r]]);void 0===this.stack&&(this.stack=(new Error).stack),void 0!==t&&(this.reason=t)}return n.prototype=m.prototype,new n(t)}function M(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(r){r.doc||(r.doc={});var o=n&&function(e,t,n){try{return!e(t,n)}catch(e){var r="Filter function threw: "+e.toString();return E(S,r)}}(e.filter,r.doc,t);if("object"==typeof o)return o;if(o)return!1;if(e.include_docs){if(!e.attachments)for(var i in r.doc._attachments)Object.prototype.hasOwnProperty.call(r.doc._attachments,i)&&(r.doc._attachments[i].stub=!0)}else delete r.doc;return!0}}var L=function(e){return btoa(e)};function D(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function q(e,t){return function(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}([D(e)],{type:t})}function R(e,t){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var n=e.target.result||"";if(r)return t(n);t(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return t}(n))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}var U=self.setImmediate||self.setTimeout;function N(e,t,n,r,o){(n>0||r<t.size)&&(t=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.slice(t,n)}(t,n,r)),function(e,t){var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)}(t,(function(t){e.append(t),o()}))}function T(e,t,n,r,o){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),o()}function F(e,t){var n="string"==typeof e,r=n?e.length:e.size,o=Math.min(32768,r),i=Math.ceil(r/o),s=0,u=n?new a:new a.ArrayBuffer,c=n?T:N;function f(){U(d)}function l(){var e=function(e){return L(e)}(u.end(!0));t(e),u.destroy()}function d(){var t=s*o,n=t+o;s++,c(u,e,t,n,s<i?f:l)}d()}function K(e,t){if(!t)return s.v4().replace(/-/g,"").toLowerCase();var n,r=g({},e);return delete r._rev_tree,n=JSON.stringify(r),a.hash(n)}var z=s.v4,V=Number.MIN_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER+1,W=Number.MIN_SAFE_INTEGER+2,J=/^[^a-zA-Z_$]|[^a-zA-Z0-9_$]+/,G=/\\.|(^|\.)[^a-zA-Z_$]|[^a-zA-Z0-9_$.]+/;var Z=new RegExp(J.source,"g"),Y=new RegExp(G.source,"g"),H="\\".charCodeAt(0);const Q=".".charCodeAt(0);function X(e,t){var n=function(e){for(var n="",r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o===Q&&t&&0===r)n+=".";else{if(o===H&&t)continue;n+="_c"+o+"_"}}return n};return t?e.replace(Y,n):e.replace(Z,n)}function ee(e){if(!function e(t){for(var n of Object.keys(t)){if(r=n,void 0?G.test(r):J.test(r))return!0;if(null===t[n]||"boolean"==typeof t[n])return!0;if("object"==typeof t[n])return e(t[n])}var r}(e))return!1;var t=Array.isArray(e),n=t?[]:{};return Object.keys(e).forEach((function(r){var o=t?r:X(r);null===e[r]?n[o]=V:"boolean"==typeof e[r]?n[o]=e[r]?W:$:"object"==typeof e[r]?n[o]=ee(e[r]):n[o]=e[r]})),n}function te(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e(E(I,n,t.type))}}function ne(e,t,n,r){return delete n._attachments[e].stub,r?(n._attachments[e].data=t.attachments[n._attachments[e].digest].data,Promise.resolve()):new Promise((function(r){R(t.attachments[n._attachments[e].digest].data,(function(t){n._attachments[e].data=L(t),delete n._attachments[e].length,r()}))}))}function re(e,t){return(e.views[t].options&&e.views[t].options.def&&e.views[t].options.def.fields||[]).map((function(e){return"string"==typeof e?e:Object.keys(e)[0]}))}function oe(e){return"_find_idx/"+e.join("/")}var ie=Math.pow(10,13);function se(e,t){var n=e.transaction.objectStore("docs");n.getAll(IDBKeyRange.bound("_design/","_design/￿")).onsuccess=function(e){var r=e.target.result,o=Array.from(n.indexNames),i=r.filter((function(e){return 0===e.deleted&&e.revs[e.rev].data.views})).map((function(e){return e.revs[e.rev].data})).reduce((function(e,t){return Object.keys(t.views).reduce((function(e,n){var r=re(t,n);return r&&r.length>0&&(e[oe(r)]=function(e){return["deleted"].concat(e.map((function(e){return["_id","_rev","_deleted","_attachments"].includes(e)?e.substr(1):"data."+X(e,!0)})))}(r)),e}),e)}),{}),s=Object.keys(i),a=["seq"];o.forEach((function(e){-1===a.indexOf(e)&&-1===s.indexOf(e)&&n.deleteIndex(e)}));var u=s.filter((function(e){return-1===o.indexOf(e)}));try{u.forEach((function(e){n.createIndex(e,i[e])}))}catch(e){t(e)}}}function ae(e,t,n,r,o){var i=n.versionchanged?indexedDB.open(n.name):indexedDB.open(n.name,1*ie+(new Date).getTime());i.onupgradeneeded=function(e){if(e.oldVersion>0&&e.oldVersion<ie)throw new Error('Incorrect adapter: you should specify the "idb" adapter to open this DB');if(0===e.oldVersion&&e.newVersion<ie)throw indexedDB.deleteDatabase(n.name),new Error("Database was deleted while open");var t;!function(e,t){t<1&&(e.createObjectStore("docs",{keyPath:"id"}).createIndex("seq","seq",{unique:!0}),e.createObjectStore("meta",{keyPath:"id"}))}(e.target.result,(t=e.oldVersion,Math.floor(t/ie))),se(i,o)},i.onblocked=function(e){console.error("onblocked, this should never happen",e)},i.onsuccess=function(t){var o=t.target.result;o.onabort=function(t){console.error("Database has a global failure",t.target.error),delete e[n.name],o.close()},o.onversionchange=function(){console.log("Database was made stale, closing handle"),e[n.name].versionchanged=!0,o.close()},o.onclose=function(){console.log("Database was made stale, closing handle"),n.name in e&&(e[n.name].versionchanged=!0)};var i={id:"meta"},s=o.transaction(["meta"],"readwrite");s.oncomplete=function(){r({idb:o,metadata:i})};var a=s.objectStore("meta");a.get("meta").onsuccess=function(e){var t=!1;"doc_count"in(i=e.target.result||i)||(t=!0,i.doc_count=0),"seq"in i||(t=!0,i.seq=0),"db_uuid"in i||(t=!0,i.db_uuid=z()),t&&a.put(i)}},i.onerror=function(e){o(e.target.error)}}function ue(e,t,n){return e[n.name]&&!e[n.name].versionchanged||(n.versionchanged=e[n.name]&&e[n.name].versionchanged,e[n.name]=new Promise((function(t,r){ae(e,0,n,t,r)}))),e[n.name]}function ce(e){for(var t,n,r,o,i=e.rev_tree.slice();o=i.pop();){var s=o.ids,a=s[2],u=o.pos;if(a.length)for(var c=0,f=a.length;c<f;c++)i.push({pos:u+1,ids:a[c]});else{var l=!!s[1].deleted,d=s[0];t&&!(r!==l?r:n!==u?n<u:t<d)||(t=d,n=u,r=l)}}return n+"-"+t}function fe(e,t){for(var n,r=e.slice();n=r.pop();)for(var o=n.pos,i=n.ids,s=i[2],a=t(0===s.length,o,i[0],n.ctx,i[1]),u=0,c=s.length;u<c;u++)r.push({pos:o+1,ids:s[u],ctx:a})}function le(e,t){return e.pos-t.pos}function de(e){for(var t=ce(e),n=function(e){var t=[];fe(e,(function(e,n,r,o,i){e&&t.push({rev:n+"-"+r,pos:n,opts:i})})),t.sort(le).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}(e.rev_tree),r=[],o=0,i=n.length;o<i;o++){var s=n[o];s.rev===t||s.opts.deleted||r.push(s.rev)}return r}function he(e,t){return e.pos-t.pos}function pe(e,t,n){var r=function(e,t,n){for(var r,o=0,i=e.length;o<i;)n(e[r=o+i>>>1],t)<0?o=r+1:i=r;return o}(e,t,n);e.splice(r,0,t)}function ve(e,t){for(var n,r,o=t,i=e.length;o<i;o++){var s=e[o],a=[s.id,s.opts,[]];r?(r[2].push(a),r=a):n=r=a}return n}function ye(e,t){return e[0]<t[0]?-1:1}function _e(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var o=n.pop(),i=o.tree1,s=o.tree2;(i[1].status||s[1].status)&&(i[1].status="available"===i[1].status||"available"===s[1].status?"available":"missing");for(var a=0;a<s[2].length;a++)if(i[2][0]){for(var u=!1,c=0;c<i[2].length;c++)i[2][c][0]===s[2][a][0]&&(n.push({tree1:i[2][c],tree2:s[2][a]}),u=!0);u||(r="new_branch",pe(i[2],s[2][a],ye))}else r="new_leaf",i[2][0]=s[2][a]}return{conflicts:r,tree:e}}function ge(e,t,n){var r,o=[],i=!1,s=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var a=0,u=e.length;a<u;a++){var c=e[a];if(c.pos===t.pos&&c.ids[0]===t.ids[0])r=_e(c.ids,t.ids),o.push({pos:c.pos,ids:r.tree}),i=i||r.conflicts,s=!0;else if(!0!==n){var f=c.pos<t.pos?c:t,l=c.pos<t.pos?t:c,d=l.pos-f.pos,h=[],p=[];for(p.push({ids:f.ids,diff:d,parent:null,parentIdx:null});p.length>0;){var v=p.pop();if(0!==v.diff)for(var y=v.ids[2],_=0,g=y.length;_<g;_++)p.push({ids:y[_],diff:v.diff-1,parent:v.ids,parentIdx:_});else v.ids[0]===l.ids[0]&&h.push(v)}var m=h[0];m?(r=_e(m.ids,l.ids),m.parent[2][m.parentIdx]=r.tree,o.push({pos:f.pos,ids:f.ids}),i=i||r.conflicts,s=!0):o.push(c)}else o.push(c)}return s||o.push(t),o.sort(he),{tree:o,conflicts:i||"internal_node"}}function me(e,t,n){var r=ge(e,t),o=function(e,t){for(var n,r,o=function(e){for(var t,n=[],r=e.slice();t=r.pop();){var o=t.pos,i=t.ids,s=i[0],a=i[1],u=i[2],c=0===u.length,f=t.history?t.history.slice():[];f.push({id:s,opts:a}),c&&n.push({pos:o+1-f.length,ids:f});for(var l=0,d=u.length;l<d;l++)r.push({pos:o+1,ids:u[l],history:f})}return n.reverse()}(e),i=0,s=o.length;i<s;i++){var a,u=o[i],c=u.ids;if(c.length>t){n||(n={});var f=c.length-t;a={pos:u.pos+f,ids:ve(c,f)};for(var l=0;l<f;l++){var d=u.pos+l+"-"+c[l].id;n[d]=!0}}else a={pos:u.pos,ids:ve(c,0)};r=r?ge(r,a,!0).tree:[a]}return n&&fe(r,(function(e,t,r){delete n[t+"-"+r]})),{tree:r,revs:n?Object.keys(n):[]}}(r.tree,n);return{tree:o.tree,stemmedRevs:o.revs,conflicts:r.conflicts}}function be(e,t){return e.flatMap(e=>(e=function(e,t){const n=d(e),r=[n];let o;for(;o=r.pop();){const{pos:e,ids:[i,,s],parent:a}=o,u=0===s.length,c=`${e}-${i}`;if(u&&c===t)return a?(a.ids[2]=a.ids[2].filter((function(e){return e[0]!==i})),n):null;for(let t=0,n=s.length;t<n;t++)r.push({pos:e+1,ids:s[t],parent:o})}return n}(e,t))?[e]:[])}function we(e,t,n,r){if(e.error)return r(e.error);e.txn.objectStore("docs").get(t).onsuccess=function(t){var o,i=t.target.result;if(o=n.rev?n.latest?function(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var o=n.pos,i=n.ids,s=i[0],a=i[1],u=i[2],c=0===u.length,f=n.history?n.history.slice():[];if(f.push({id:s,pos:o,opts:a}),c)for(var l=0,d=f.length;l<d;l++){var h=f[l];if(h.pos+"-"+h.id===e)return o+"-"+s}for(var p=0,v=u.length;p<v;p++)r.push({pos:o+1,ids:u[p],history:f})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}(n.rev,i):n.rev:i&&i.rev,i&&(!i.deleted||n.rev)&&o in i.revs){var s=i.revs[o].data;s._id=i.id,s._rev=o,r(null,{doc:s,metadata:i,ctx:e})}else r(E(b,"missing"))}}function Ae(e,t,n,r,o,i){if(e.error)return i(e.error);var s;e.txn.objectStore("docs").get(t).onsuccess=function(e){var t=e.target.result,r=t.revs[o.rev||t.rev].data._attachments[n].digest;s=t.attachments[r].data},e.txn.oncomplete=function(){!function(e,t,n){if(t.binary)return n(null,e);R(e,(function(e){n(null,L(e))}))}(s,o,i)},e.txn.onabort=i}function Oe(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})}var je=Oe(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),xe=Oe(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function ke(e){if(!/^\d+-/.test(e))return E(P);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function Be(e,t,n){var r,o,i;n||(n={deterministic_revs:!0});var s={status:"available"};if(e._deleted&&(s.deleted=!0),t)if(e._id||(e._id=z()),o=K(e,n.deterministic_revs),e._rev){if((i=ke(e._rev)).error)return i;e._rev_tree=[{pos:i.prefix,ids:[i.id,{status:"missing"},[[o,s,[]]]]}],r=i.prefix+1}else e._rev_tree=[{pos:1,ids:[o,s,[]]}],r=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,o=[r[0],t,[]],i=1,s=r.length;i<s;i++)o=[r[i],{status:"missing"},[o]];return[{pos:n,ids:o}]}(e._revisions,s),r=e._revisions.start,o=e._revisions.ids[0]),!e._rev_tree){if((i=ke(e._rev)).error)return i;r=i.prefix,o=i.id,e._rev_tree=[{pos:r,ids:[o,s,[]]}]}!function(e){var t;if(e?"string"!=typeof e?t=E(A):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=E(j)):t=E(O),t)throw t}(e._id),e._rev=r+"-"+o;var a={metadata:{},data:{}};for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var c="_"===u[0];if(c&&!je[u]){var f=E(B,u);throw f.message=B.message+": "+u,f}c&&!xe[u]?a.metadata[u.slice(1)]=e[u]:a.data[u]=e[u]}return a}function Se(e,t,n,r,o,i,s){var a,u,c,f=[],l=[],d=o.revs_limit||1e3,h=-1===o.name.indexOf("-mrview-");const p=o.auto_compaction;function v(e){return/^_local/.test(e.id)?1:d}function y(e,t){var i=0,s={};function a(a){a.target.result&&(s[a.target.result.id]=a.target.result),++i===t.length&&function(e,t,i){t.forEach((function(t,s){var a;if("was_delete"in n&&!Object.prototype.hasOwnProperty.call(i,t.id))a=E(b,"deleted");else if(n.new_edits&&!Object.prototype.hasOwnProperty.call(i,t.id)&&function(e){return"missing"===e.rev_tree[0].ids[1].status}(t))a=E(w);else if(Object.prototype.hasOwnProperty.call(i,t.id)){if(0==(a=function(e,t,r){if(t.rev in r.revs&&!n.new_edits)return!1;var i=/^1-/.test(t.rev);if(r.deleted&&!t.deleted&&n.new_edits&&i){var s=t.revs[t.rev].data;s._rev=r.rev,s._id=r.id,t=g(Be(s,n.new_edits,o))}var a=me(r.rev_tree,t.rev_tree[0],v(t));t.stemmedRevs=a.stemmedRevs,t.rev_tree=a.tree;var u=r.revs;if(u[t.rev]=t.revs[t.rev],t.revs=u,t.attachments=r.attachments,n.new_edits&&(r.deleted&&t.deleted||!r.deleted&&"new_leaf"!==a.conflicts||r.deleted&&!t.deleted&&"new_branch"===a.conflicts||r.rev===t.rev))return E(w);return t.wasDeleted=r.deleted,t}(0,t,i[t.id])))return}else{var l=me([],t.rev_tree[0],v(t));t.rev_tree=l.tree,t.stemmedRevs=l.stemmedRevs,(a=t).isNewDoc=!0,a.wasDeleted=t.revs[t.rev].deleted?1:0}a.error?f[s]=a:(i[a.id]=a,c=s,function(e,t,n){var o=ce(t),i=t.rev,s=/^_local/.test(t.id),a=t.revs[o].data;const c=t.isNewDoc;if(h){var l=ee(a);l?(t.data=l,delete t.data._attachments):t.data=a}else t.data=a;if(t.rev=o,t.deleted=t.revs[o].deleted?1:0,!s){t.seq=++r.seq;var d=0;t.isNewDoc?d=t.deleted?0:1:t.wasDeleted!==t.deleted&&(d=t.deleted?-1:1),r.doc_count+=d}delete t.isNewDoc,delete t.wasDeleted;let v=t.stemmedRevs||[];if(p&&!c){const e=function(e){var t=[];return fe(e.rev_tree,(function(e,n,r,o,i){"available"!==i.status||e||(t.push(n+"-"+r),i.status="missing")})),t}(t);e.length&&(v=v.concat(e))}v.length&&v.forEach((function(e){delete t.revs[e]}));delete t.stemmedRevs,"attachments"in t||(t.attachments={});if(a._attachments)for(var y in a._attachments){var g=a._attachments[y];if(g.stub){if(!(g.digest in t.attachments))return u=E(C),void e.abort();_(t,i,g.digest)&&(t.attachments[g.digest].revs[i]=!0)}else t.attachments[g.digest]=g,t.attachments[g.digest].revs={},t.attachments[g.digest].revs[i]=!0,a._attachments[y]={stub:!0,digest:g.digest,content_type:g.content_type,length:g.length,revpos:parseInt(i,10)}}if(s&&t.deleted)return e.objectStore("docs").delete(t.id).onsuccess=function(){f[n]={ok:!0,id:t.id,rev:"0-0"}},void m(n);e.objectStore("docs").put(t).onsuccess=function(){f[n]={ok:!0,id:t.id,rev:i},m(n)}}(e,a,s))}))}(e,t,s)}t.forEach((function(t){e.objectStore("docs").get(t.id).onsuccess=a}))}function _(e,t,n){return e.revs[t]&&e.revs[t].data._attachments&&Object.values(e.revs[t].data._attachments).find((function(e){return e.digest===n}))}function g(e){var t={id:e.metadata.id,rev:e.metadata.rev,rev_tree:e.metadata.rev_tree,revs:e.metadata.revs||{}};return t.revs[t.rev]={data:e.data,deleted:e.metadata.deleted},t}function m(e){e===c&&a.objectStore("meta").put(r)}function A(e){if(e.stub)return Promise.resolve(e);var t;if("string"==typeof e.data){if((t=function(e){try{return atob(e)}catch(e){return{error:E(k,"Attachment is not a valid base64 string")}}}(e.data)).error)return Promise.reject(t.error);e.data=q(t,e.content_type)}else t=e.data;return new Promise((function(n){F(t,(function(r){e.digest="md5-"+r,e.length=t.size||t.length||0,n(e)}))}))}for(var O=0,j=t.docs.length;O<j;O++){var B;try{B=Be(t.docs[O],n.new_edits,o)}catch(e){B=e}if(B.error)return s(B);l.push(g(B))}var S;(S=l.map((function(e){var t=e.revs[e.rev].data;if(!t._attachments)return Promise.resolve(t);var n=Object.keys(t._attachments).map((function(e){return t._attachments[e].name=e,A(t._attachments[e])}));return Promise.all(n).then((function(e){var n={};return e.forEach((function(e){n[e.name]=e,delete e.name})),t._attachments=n,t}))})),Promise.all(S)).then((function(){e._openTransactionSafely(["docs","meta"],"readwrite",(function(e,t){if(e)return s(e);(a=t).onabort=function(){s(u||E(x,"transaction was aborted"))},a.ontimeout=te(s),a.oncomplete=function(){i.notify(o.name),s(null,f)},y(a,l)}))})).catch((function(e){s(e)}))}function Ie(e,t,n,r){if(e.error)return r(e.error);if(0===n.limit){var o={total_rows:t.doc_count,offset:n.skip,rows:[]};return n.update_seq&&(o.update_seq=t.seq),r(null,o)}var i,s=[],a=[],u="startkey"in n&&n.startkey,c="endkey"in n&&n.endkey,f="key"in n&&n.key,l="keys"in n&&n.keys,d=n.skip||0,h="number"==typeof n.limit?n.limit:-1,p=!1!==n.inclusive_end,v="descending"in n&&n.descending?"prev":null;if(!l&&(i=function(e,t,n,r,o){try{if(e&&t)return o?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return o?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return o?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(e){return{error:e}}return null}(u,c,p,f,v))&&i.error)return function(e,t,n,r){if("DataError"===n.name&&0===n.code){var o={total_rows:t.doc_count,offset:e.skip,rows:[]};return e.update_seq&&(o.update_seq=t.seq),r(null,o)}r(E(I,n.name,n.message))}(n,t,i.error,r);var y=e.txn.objectStore("docs");if(e.txn.oncomplete=function(){Promise.all(a).then((function(){var e={total_rows:t.doc_count,offset:0,rows:s};n.update_seq&&(e.update_seq=t.seq),r(null,e)}))},l)return function(e,t,n){var r=new Array(e.length),o=0;e.forEach((function(i,s){t.get(i).onsuccess=function(t){t.target.result?r[s]=t.target.result:r[s]={key:i,error:"not_found"},++o===e.length&&r.forEach((function(e){n(e)}))}}))}(n.keys,y,_);function _(e){if(e.error&&l)return s.push(e),!0;var t={id:e.id,key:e.id,value:{rev:e.rev}};if(e.deleted)l&&(s.push(t),t.value.deleted=!0,t.doc=null);else if(d--<=0&&(s.push(t),n.include_docs&&function(e,t){var r=t.revs[t.rev].data;if(e.doc=r,e.doc._id=t.id,e.doc._rev=t.rev,n.conflicts){var o=de(t);o.length&&(e.doc._conflicts=o)}if(n.attachments&&r._attachments)for(var i in r._attachments)a.push(ne(i,t,e.doc,n.binary))}(t,e),0==--h))return!1;return!0}(v?y.openCursor(i,v):y.openCursor(i)).onsuccess=function(e){var t=e.target.result&&e.target.result.value;if(t){if(/^_local/.test(t.id))return e.target.result.continue();_(t)&&e.target.result.continue()}}}function Pe(e,t,n){if(e.error)return n(e.error);e.txn.objectStore("docs").get(t).onsuccess=function(e){e.target.result?n(null,e.target.result.rev_tree):n(E(b))}}function Ce(e,t,n,r){if(e.error)return r(e.error);var o=e.txn.objectStore("docs");o.get(t).onsuccess=function(e){var t=e.target.result;fe(t.rev_tree,(function(e,t,r,o,i){var s=t+"-"+r;-1!==n.indexOf(s)&&(i.status="missing")}));var r=[];n.forEach((function(e){if(e in t.revs){if(t.revs[e].data._attachments)for(var n in t.revs[e].data._attachments)r.push(t.revs[e].data._attachments[n].digest);delete t.revs[e]}})),r.forEach((function(e){n.forEach((function(n){delete t.attachments[e].revs[n]})),Object.keys(t.attachments[e].revs).length||delete t.attachments[e]})),o.put(t)},e.txn.oncomplete=function(){r()}}var Ee=Number.NEGATIVE_INFINITY,Me=[[[[[[[[[[[[]]]]]]]]]]]];function Le(e,t,n,r){var o=this,i=t.split("/");return new Promise((function(e,s){o.get("_design/"+i[0]).then((function(a){if(function(e,t){return t in e.views&&e.views[t].options&&e.views[t].options.def&&e.views[t].options.def.partial_filter_selector}(a,i[1]))return r(t,n).then(e,s);var u=re(a,i[1]);if(!u)throw new Error("ddoc "+a._id+" with view "+i[1]+" does not have map.options.def.fields defined.");var c=n.skip,f=Number.isInteger(n.limit)&&n.limit;return function e(t,n,r){var o=oe(n);return new Promise((function(i){t._openTransactionSafely(["docs"],"readonly",(function(s,a){if(s)return te(r)(s);a.onabort=te(r),a.ontimeout=te(r),-1===Array.from(a.objectStore("docs").indexNames).indexOf(o)?t._freshen().then((function(){return e(t,n,r)})).then(i):i(a.objectStore("docs").index(o))}))}))}(o,u,s).then((function(t){var r=function(e){function t(e,t){return void 0!==e[t]}function n(e,t){return[0].concat(e).map((function(e){if(null===e&&t)return V;if(!0===e)return W;if(!1===e)return $;if(!t){if(null===e)return Ee;if(Object.prototype.hasOwnProperty.call(e,"￿"))return Me}return e}))}if(t(e,"inclusive_end")||(e.inclusive_end=!0),t(e,"inclusive_start")||(e.inclusive_start=!0),e.descending){var r=e.startkey,o=e.inclusive_start;e.startkey=e.endkey,e.endkey=r,e.inclusive_start=e.inclusive_end,e.inclusive_end=o}try{return t(e,"key")?IDBKeyRange.only(n(e.key,!0)):t(e,"startkey")&&!t(e,"endkey")?IDBKeyRange.bound(n(e.startkey),[1],!e.inclusive_start,!0):!t(e,"startkey")&&t(e,"endkey")?IDBKeyRange.upperBound(n(e.endkey),!e.inclusive_end):t(e,"startkey")&&t(e,"endkey")?IDBKeyRange.bound(n(e.startkey),n(e.endkey),!e.inclusive_start,!e.inclusive_end):IDBKeyRange.only([0])}catch(t){throw console.error("Could not generate keyRange",t,e),Error("Could not generate key range with "+JSON.stringify(e))}}(n),o=t.openCursor(r,n.descending?"prev":"next"),i=[];o.onerror=te(s),o.onsuccess=function(t){var n,r,o=t.target.result;return o&&0!==f?c?(o.advance(c),void(c=!1)):(f&&(f-=1),i.push({doc:(n=o.value,r=n.revs[n.rev].data,r._id=n.id,r._rev=n.rev,n.deleted&&(r._deleted=!0),r)}),void o.continue()):e({rows:i})}}))})).catch(s)}))}function De(e,t){return t()}function qe(e,t,n,r){if(e.error)return r(e.error);const o=e.txn.objectStore("docs"),i=[];let s=!1;o.get(t).onsuccess=e=>{const t=e.target.result;for(const e of n)t.rev_tree=be(t.rev_tree,e),delete t.revs[e],i.push(e);if(0===t.rev_tree.length)return o.delete(t.id),void(s=!0);t.rev=ce(t),t.data=t.revs[t.rev].data,t.attachments=function(e,t){if(!e.attachments)return{};for(let n in e.attachments){const r=e.attachments[n];for(let e of t)r.revs[e]&&delete r.revs[e];0===Object.keys(r.revs).length&&delete e.attachments[n]}return e.attachments}(t,n),o.put(t)},e.txn.oncomplete=function(){r(null,{ok:!0,deletedRevs:i,documentWasRemovedCompletely:s})}}var Re=new class extends i{constructor(){super(),this._listeners={},_()&&addEventListener("storage",e=>{this.emit(e.key)})}addListener(e,t,n,r){if(!this._listeners[t]){var i=!1,s=this;this._listeners[t]=a,this.on(e,a)}function a(){if(s._listeners[t])if(i)i="waiting";else{i=!0;var e=function(e,t){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];i in e&&(n[i]=e[i])}return n}(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(e).on("change",(function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))})).on("complete",(function(){"waiting"===i&&o(a),i=!1})).on("error",(function(){i=!1}))}}}removeListener(e,t){t in this._listeners&&(super.removeListener(e,this._listeners[t]),delete this._listeners[t])}notifyLocalWindows(e){_()&&(localStorage[e]="a"===localStorage[e]?"b":"a")}notify(e){this.emit(e),this.notifyLocalWindows(e)}},Ue={};function Ne(e,t){e.view_adapter&&console.log("Please note that the indexeddb adapter manages _find indexes itself, therefore it is not using your specified view_adapter");var n=this,r={},o=function(t){return function(){var o=Array.prototype.slice.call(arguments);ue(Ue,0,e).then((function(e){r=e.metadata,o.unshift(e.idb),t.apply(n,o)})).catch((function(e){var t=o.pop();"function"==typeof t?t(e):console.error(e)}))}},i=function(t){return function(){var o=Array.prototype.slice.call(arguments);return ue(Ue,0,e).then((function(e){return r=e.metadata,o.unshift(e.idb),t.apply(n,o)}))}},s=function(t,o,i){return o=o||["docs"],i=i||"readonly",function(){var s=Array.prototype.slice.call(arguments),a={};ue(Ue,0,e).then((function(e){r=e.metadata,a.txn=e.idb.transaction(o,i)})).catch((function(e){console.error("Failed to establish transaction safely"),console.error(e),a.error=e})).then((function(){s.unshift(a),t.apply(n,s)}))}};n._openTransactionSafely=function(e,t,n){s((function(e,t){t(e.error,e.txn)}),e,t)(n)},n._remote=!1,n.type=function(){return"indexeddb"},n._id=o((function(e,t){t(null,r.db_uuid)})),n._info=o((function(e,t){return function(e,t){t(null,{doc_count:e.doc_count,update_seq:e.seq})}(r,t)})),n._get=s(we),n._bulkDocs=o((function(t,o,i,s){Se(n,o,i,r,e,Re,s)})),n._allDocs=s((function(e,t,n){Ie(e,r,t,n)})),n._getAttachment=s(Ae),n._changes=s((function(t,r){!function(e,t,n,r,o){if(e.error)return o.complete(e.error);if(o.continuous){var i=r.name+":"+z();return t.addListener(r.name,i,n,o),t.notify(r.name),{cancel:function(){t.removeListener(r.name,i)}}}var s="limit"in o?o.limit:-1;0===s&&(s=1);var a,u=e.txn.objectStore("docs").index("seq"),c=M(o),f=0,l=o.since||0,d=[],h=[];a=o.descending?u.openCursor(null,"prev"):u.openCursor(IDBKeyRange.lowerBound(o.since,!0)),e.txn.oncomplete=function(){Promise.all(h).then((function(){o.complete(null,{results:d,last_seq:l})}))},a.onsuccess=function(e){if(e.target.result){var t=e.target.result,n=t.value;if(n.data=n.revs[n.rev].data,n.data._id=n.id,n.data._rev=n.rev,n.deleted&&(n.data._deleted=!0),o.doc_ids&&-1===o.doc_ids.indexOf(n.id))return t.continue();var r=o.processChange(n.data,n,o);r.seq=n.seq,l=n.seq;var i=c(r);if("object"==typeof i)return o.complete(i);if(i)if(f++,o.return_docs&&d.push(r),o.include_docs&&o.attachments&&n.data._attachments){var a=[];for(var u in n.data._attachments){var p=ne(u,n,r.doc,o.binary);a.push(p),h.push(p)}Promise.all(a).then((function(){o.onChange(r)}))}else o.onChange(r);f!==s&&t.continue()}}}(t,Re,n,e,r)})),n._getRevisionTree=s(Pe),n._doCompaction=s(Ce,["docs"],"readwrite"),n._customFindAbstractMapper={query:i(Le),viewCleanup:i(De)},n._destroy=function(t,n){return function(e,t,n,r){function o(){indexedDB.deleteDatabase(e.name).onsuccess=function(){delete t[e.name],r(null,{ok:!0})}}n.removeAllListeners(e.name),e.name in t?t[e.name].then((function(e){e.idb.close(),o()})):o()}(e,Ue,Re,n)},n._close=o((function(t,n){delete Ue[e.name],t.close(),n()})),n._freshen=function(){return new Promise((function(e){n._close((function(){o(e)()}))}))},n._purge=s(qe,["docs"],"readwrite"),setTimeout((function(){t(null,n)}))}Ne.valid=function(){return!0},"undefined"==typeof PouchDBVersion801?function(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}("error",'indexeddb adapter plugin error: Cannot find global "PouchDBVersion801" object! Did you remember to include pouchdb.js?'):PouchDBVersion801.plugin((function(e){e.adapter("indexeddb",Ne,!0)}))},{10:10,2:2,3:3,9:9}]},{},[25]);