<!DOCTYPE html>
<html>
  <head>
    <title>Post a doc</title>
    <script type="text/javascript" src="../pouch.alpha.js"></script>
  </head>
  <body>
    <h1>Post a doc</h1>
    <pre id=debug></pre>
    <script type="text/javascript">
      (function() {
        var debug = document.getElementById('debug');
        function log(msg, obj) {
          console.log(msg, obj);
          debug.innerHTML += msg + '\n';
          if (obj) {
            debug.innerHTML += '  ' + JSON.stringify(obj) + '\n';
          }
        }

        // eg post.html#idb%3A%2F%2Ftest_suite_db1
        var dbname = decodeURIComponent(location.hash.replace(/^#/, ''));
        if (!dbname) {
          log('Error: No db name given!');
          return;
        }
        log('Using ' + dbname);

        Pouch(dbname, function(err, db) {
          if (err) {
            log('Error: Could not open ', dbname);
            return;
          }
          log('db is open');

          db.post({test:"adoc"}, function (err, info) {
            if (err) {
              log('Error: Could not post to ', dbname);
              return;
            }
            log('doc posted:', info);
          });
        });
      })();
    </script>
  </body>
</html>

