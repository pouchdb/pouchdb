<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>PouchDB</title>

    <script type="text/javascript" src="syntaxhighlighter_3.0.83/scripts/shCore.js"></script>
    <script type="text/javascript" src="syntaxhighlighter_3.0.83/scripts/shBrushJScript.js"></script>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link href="syntaxhighlighter_3.0.83/styles/shCore.css" rel="stylesheet" type="text/css" />
    <link href="syntaxhighlighter_3.0.83/styles/shThemeRDark.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="/">PouchDB</a></h1>
        <p>PouchDB is a pocket-sized database.</p>
        <ul>
          <li>
            <a href="http://cloud.github.com/downloads/daleharvey/pouchdb/pouch.alpha.min.js">
              <strong>Download pouch.alpha.min.js (131Kb)</strong>
            </a>
            or the <a href="http://cloud.github.com/downloads/daleharvey/pouchdb/pouch.alpha.js">uncompressed source</a> (152Kb)
          </li>
        </ul>
        <h2><a href="#api-documentation">API Documentation</a></h2>
        <h2><a href="https://github.com/daleharvey/pouchdb/wiki">Wiki</a></h2>
        <h2><a href="https://groups.google.com/d/forum/pouchdb">Discussion Group</a></h2>
        <h2><a href="https://github.com/daleharvey/pouchdb">Source & Bugs</a></h2>
        <h2><a href="https://twitter.com/pouchdb">Twitter</a></h2>

        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>

      </header>
      <section>
<h1>PouchDB</h1>

<p>PouchDB is a JavaScript library that allows you to store and query data for web applications that need to work offline, and sync with an online database when you are online.</p>

<h4>The Browser Database that Syncs</h4>

<p>Based on the work of <a href="http://couchdb.apache.org/">Apache CouchDB</a>, PouchDB provides a simple API in which to store and retrieve JSON objects, due to the similiar API, and CouchDB's HTTP API it is possible to sync data that is stored in your local PouchDB to an online CouchDB as well as syncing data from CouchDB down to PouchDB (you can even sync between 2 PouchDB databases).</p>

<h4>Status & Browser Support</h4>

<p>PouchDB is currently in alpha preview. The first version will support browsers that have implemented the <a href="http://www.w3.org/TR/IndexedDB/">HTML5 IndexedDB API</a>. Work is being done on providing support for <a href="https://github.com/daleharvey/pouchdb/issues/63">WebSQL</a> as well as <a href="https://github.com/daleharvey/pouchdb/issues/44">LocalStorage</a> and <a href="https://github.com/daleharvey/pouchdb/issues/82">node.js</a>. Currently tested in:</p>
<ul>
  <li>Firefox 12+</li>
  <li>Chrome 19+</li>
</ul>
</p>

<h1>Getting started</h1>

<p>Download <a href="http://cloud.github.com/downloads/daleharvey/pouchdb/pouch.alpha.js">pouch.js</a> and include in your HTML then you can start using PouchDB straight away, here is a quick example:</p>

<pre class="brush: js">var authors = [
  {name: 'Dale Harvey', commits: 253},
  {name: 'Mikeal Rogers', commits: 42},
  {name: 'Johannes J. Schmidt', commits: 13},
  {name: 'Randall Leeds', commits: 9}
];
Pouch('idb://authors', function(err, db) {
  // Opened a new database
  db.bulkDocs({docs: authors}, function(err, results) {
    // Saved the documents into the database
    db.replicate.to('http://host.com/cloud', function() {
      // The documents are now in the cloud!
    });
  });
});</pre>

<h1><a name="api-documentation" class="anchor" href="#api-documentation"><span class="mini-icon mini-icon-link"></span></a>API Documentation</h1></1>

<p>Most of the Pouch API is exposed as <code>fun(arg, [options], [callback])</code> Where both the options and the callback are optional. Callbacks are in the node.js idiom of <code>function(err, data)</code> Where the first argument will be undefined unless there is an error, further arguments specify the result.</p>

<h3>
<a name="api-methods" class="anchor" href="#api-methods"><span class="mini-icon mini-icon-link"></span></a>API Methods</h3>

<ul>
<li><a href="#create-a-database">Create a database</a></li>
<li><a href="#delete-a-database">Delete a database</a></li>
<li><a href="#create-a-document">Create a document</a></li>
<li><a href="#update-a-document">Update a document</a></li>
<li><a href="#create-a-batch-of-documents">Create a batch of documents</a></li>
<li><a href="#fetch-a-document">Fetch a document</a></li>
<li><a href="#fetch-documents">Fetch documents</a></li>
<li><a href="#query-the-database">Query the database</a></li>
<li><a href="#delete-a-document">Delete a document</a></li>
<li><a href="#get-database-information">Get database information</a></li>
<li><a href="#listen-to-database-changes">Listen to database changes</a></li>
<li><a href="#replicate-a-database">Replicate a database</a></li>
</ul><h2>
<a name="create-a-database" class="anchor" href="#create-a-database"><span class="mini-icon mini-icon-link"></span></a>Create a database</h2>

<pre class="brush: js">Pouch('idb://dbname', [options], [callback])</pre>

<p>This method gets an existing database if one exists or creates a new one if one does not exist. The protocol field denotes which backend you want to use (currently only http and indexeddb are supported)</p>

<pre class="brush: js">Pouch('idb://test', function(err, db) {
  // Use db to call further functions
})
</pre>

<h2>
<a name="delete-a-database" class="anchor" href="#delete-a-database"><span class="mini-icon mini-icon-link"></span></a>Delete a database</h2>

<pre class="brush: js">Pouch.destroy(name, [callback])</pre>

<p>Delete database with given name</p>

<pre class="brush: js">Pouch.destroy('idb://test', function(err, info) {
  // database deleted
})
</pre>

<h2>
<a name="create-a-document" class="anchor" href="#create-a-document"><span class="mini-icon mini-icon-link"></span></a>Create a document</h2>

<pre class="brush: js">db.post(doc, [options], [callback])</pre>

<p>Create a new document. Only use <code>db.post</code> if you want PouchDB to generate
an ID for your document, otherwise use <a href="#update-a-document">db.put</a></p>

<pre class="brush: js">db.post({ title: 'Cony Island Baby' }, function(err, response) {
  // Response:
  // {
  //   "ok": true,
  //   "id": "0B3358C1-BA4B-4186-8795-9024203EB7DD",
  //   "rev": "1-5782E71F1E4BF698FA3793D9D5A96393"
  // }
})
</pre>

<h2>
<a name="update-a-document" class="anchor" href="#update-a-document"><span class="mini-icon mini-icon-link"></span></a>Update a document</h2>

<pre class="brush: js">db.put(doc, [options], [callback])</pre>

<p>Create a new document or update an existing document.</p>

<pre class="brush: js">db.put({ _id: 'mydoc', title: 'Rock and Roll Heart' }, function(err, response) {
  // Response:
  // {
  //   "ok": true,
  //   "id": "mydoc",
  //   "rev": "1-A6157A5EA545C99B00FF904EEF05FD9F"
  // }
})
</pre>

<h2>
<a name="save-an-attachment-to-a-document" class="anchor" href="#save-an-attachment-to-a-document"><span class="mini-icon mini-icon-link"></span></a>Save an attachment to a document</h2>

<pre class="brush: js">db.putAttachment(id, rev, doc, type, [callback])</pre>

<p>Create an attachment in an existing document.</p>

<pre class="brush: js">db.put({ _id: 'otherdoc', title: 'Legendary Hearts' }, function(err, response) {
  var doc = 'Legendary hearts, tear us all apart\nMake our emotions bleed, crying out in need';
  db.putAttachment('otherdoc/text', response.rev, doc, 'text/plain', function(err, res) {
    // Response:
    // {
    //   "ok": true,
    //   "id": "otherdoc",
    //   "rev": "2-068E73F5B44FEC987B51354DFC772891"
    // }
  })
})
</pre>

<h2>
<a name="create-a-batch-of-documents" class="anchor" href="#create-a-batch-of-documents"><span class="mini-icon mini-icon-link"></span></a>Create a batch of documents</h2>

<pre class="brush: js">db.bulkDocs(docs, [options], [callback])</pre>

<p>Modify, create or delete multiple documents.</p>

<pre class="brush: js">db.bulkDocs({ docs: [{ title: 'Lisa Says' }] }, function(err, response) {
  // Response array:
  // [
  //   {
  //     "ok": true,
  //     "id": "828124B9-3973-4AF3-9DFD-A94CE4544005",
  //     "rev": "1-A8BC08745E62E58830CA066D99E5F457"
  //   }
  // ]
})
</pre>

<h2>
<a name="fetch-a-document" class="anchor" href="#fetch-a-document"><span class="mini-icon mini-icon-link"></span></a>Fetch a document</h2>

<pre class="brush: js">db.get(docid, [options], [callback])</pre>

<p>Getrieves a document, specified by <code>docid</code>.</p>

<ul>
<li>
<code>options.revs</code>: Include revision history of the document</li>
<li>
<code>options.revs_info</code>: Include a list of revisions of the document, and their availability</li>
</ul><pre class="brush: js">
db.get('mydoc', function(err, doc) {
  // Document:
  // {
  //   "title": "Rock and Roll Heart",
  //   "_id": "mydoc",
  //   "_rev": "1-A6157A5EA545C99B00FF904EEF05FD9F"
  // }
})
</pre>

<h2>
<a name="fetch-documents" class="anchor" href="#fetch-documents"><span class="mini-icon mini-icon-link"></span></a>Fetch documents</h2>

<pre class="brush: js">db.allDocs([options], [callback])</pre>

<p>Fetch multiple documents.</p>

<ul>
<li>
<code>options.include_docs</code>: Include the associated document with each change</li>
<li>
<code>options.conflicts</code>: Include conflicts</li>
<li>
<code>options.startkey</code> &amp; <code>options.endkey</code>: Get documents with keys in a certain range</li>
<li>
<code>options.descending</code>: Reverse the order of the output table</li>
</ul><pre class="brush: js">
db.allDocs(function(err, response) {
  // Document rows:
  // {
  //   "total_rows": 4,
  //   "rows": [
  //     {
  //       "id": "0B3358C1-BA4B-4186-8795-9024203EB7DD",
  //       "key": "0B3358C1-BA4B-4186-8795-9024203EB7DD",
  //       "value": {
  //         "rev": "1-5782E71F1E4BF698FA3793D9D5A96393"
  //       }
  //     },
  //     {
  //       "id": "828124B9-3973-4AF3-9DFD-A94CE4544005",
  //       "key": "828124B9-3973-4AF3-9DFD-A94CE4544005",
  //       "value": {
  //         "rev": "1-A8BC08745E62E58830CA066D99E5F457"
  //       }
  //     },
  //     {
  //       "id": "mydoc",
  //       "key": "mydoc",
  //       "value": {
  //         "rev": "1-A6157A5EA545C99B00FF904EEF05FD9F"
  //       }
  //     },
  //     {
  //       "id": "otherdoc",
  //       "key": "otherdoc",
  //       "value": {
  //         "rev": "1-3753476B70A49EA4D8C9039E7B04254C"
  //       }
  //     }
  //   ]
  // }
})
</pre>

<h2>
<a name="query-the-database" class="anchor" href="#query-the-database"><span class="mini-icon mini-icon-link"></span></a>Query the database</h2>

<pre class="brush: js">db.query(fun, [options], [callback])</pre>

<p>Retrieve a view.</p>

<ul>
<li>
<code>fun</code>: Name of a view function or function</li>
<li>
<code>options.reduce</code>: To reduce or not. The default is to reduce if there is a reduce function</li>
</ul><pre class="brush: js">
function map(doc) {
  if(doc.title) {
    emit(doc.title, null);
  }
}
db.query({map: map}, {reduce: false}, function(err, response) {
  // View rows:
  // {
  //   "rows": [
  //     {
  //       "id": "0B3358C1-BA4B-4186-8795-9024203EB7DD",
  //       "key": "Cony Island Baby",
  //       "value": null
  //     },
  //     {
  //       "id": "otherdoc",
  //       "key": "Legendary Hearts",
  //       "value": null
  //     },
  //     {
  //       "id": "828124B9-3973-4AF3-9DFD-A94CE4544005",
  //       "key": "Lisa Says",
  //       "value": null
  //     },
  //     {
  //       "id": "mydoc",
  //       "key": "Rock and Roll Heart",
  //       "value": null
  //     }
  //   ]
  // }
})
</pre>

<h2>
<a name="delete-a-document" class="anchor" href="#delete-a-document"><span class="mini-icon mini-icon-link"></span></a>Delete a document</h2>

<pre class="brush: js">db.remove(doc, [options], [callback])</pre>

<p>Delete a document.</p>

<pre class="brush: js">
db.get('mydoc', function(err, doc) {
  db.remove(doc, function(err, response) {
    // Response:
    // {
    //   "ok": true,
    //   "id": "mydoc",
    //   "rev": "2-9AF304BE281790604D1D8A4B0F4C9ADB"
    // }
  })
})
</pre>

<h2>
<a name="get-database-information" class="anchor" href="#get-database-information"><span class="mini-icon mini-icon-link"></span></a>Get database information</h2>

<pre class="brush: js">db.info(callback)</pre>

<p>Get information about a database.</p>

<pre class="brush: js">db.info(function(err, info) {
  // Database information:
  // {
  //   "db_name": "test",
  //   "doc_count": 4,
  //   "update_seq": 0
  // }
})
</pre>

<h2>
<a name="listen-to-database-changes" class="anchor" href="#listen-to-database-changes"><span class="mini-icon mini-icon-link"></span></a>Listen to database changes</h2>

<p>db.changes(options)</p>

<p>A list of changes made to documents in the database, in the order they were made.</p>

<ul>
<li>
<code>options.include_docs</code>: Include the associated document with each change</li>
<li>
<code>options.continuous</code>: Use <em>longpoll</em> feed</li>
<li>
<code>options.conflicts</code>: Include conflicts</li>
<li>
<code>options.descending</code>: Reverse the order of the output table</li>
<li>
<code>options.filter</code>: Reference a filter function from a design document to selectively get updates</li>
<li>
<code>options.since</code>: Start the results from the change immediately after the given sequence number</li>
<li>
<code>options.complete</code>: Function called when all changes have been processed, defaults to the callback</li>
<li>
<code>options.onChange</code>: Function called on each change after deduplication (only sends the most recent for each document), not called as a callback but called as onChange(change)</li>
</ul><pre class="brush: js">
db.changes(options, function(err, response) {
  // Changes list:
  // {
  //   "results": [
  //     {
  //       "id": "0B3358C1-BA4B-4186-8795-9024203EB7DD",
  //       "seq": 1,
  //       "changes": [
  //         {
  //           "rev": "1-5782E71F1E4BF698FA3793D9D5A96393"
  //         }
  //       ]
  //     },
  //     {
  //       "id": "mydoc",
  //       "seq": 2,
  //       "changes": [
  //         {
  //           "rev": "1-A6157A5EA545C99B00FF904EEF05FD9F"
  //         }
  //       ]
  //     },
  //     {
  //       "id": "otherdoc",
  //       "seq": 3,
  //       "changes": [
  //         {
  //           "rev": "1-3753476B70A49EA4D8C9039E7B04254C"
  //         }
  //       ]
  //     },
  //     {
  //       "id": "828124B9-3973-4AF3-9DFD-A94CE4544005",
  //       "seq": 4,
  //       "changes": [
  //         {
  //           "rev": "1-A8BC08745E62E58830CA066D99E5F457"
  //         }
  //       ]
  //     }
  //   ]
  // }
})
</pre>

<h2>
<a name="replicate-a-database" class="anchor" href="#replicate-a-database"><span class="mini-icon mini-icon-link"></span></a>Replicate a database</h2>

<pre class="brush: js">Pouch.replicate(from, to, [callback])</pre>

<pre class="brush: js">db.replicate('idb://mydb', 'http://localhost:5984/mydb', function(err, changes) {
  //
})
</pre>

      </section>
    </div>
    <script src="javascripts/scale.fix.js"></script>
<script type="text/javascript">
SyntaxHighlighter.defaults['gutter'] = false;
SyntaxHighlighter.all()
</script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-59760-20']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>
