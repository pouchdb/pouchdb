import crypto from 'crypto';
import { Buffer } from 'buffer';

function binaryMd5(data, callback) {
  if (Buffer.isBuffer(data) || typeof FileReader === "undefined") {
    var base64 = crypto.createHash('md5').update(data, 'binary').digest('base64');
    callback(base64);
  } else {
    var fileReader = new FileReader();
    fileReader.onload = function (event) {
        var base64 = crypto.createHash('md5').update(Buffer.from(event.target.result), 'binary').digest('base64');
        callback(base64);
    };
    fileReader.readAsArrayBuffer(data);
  }
}

export default binaryMd5;
