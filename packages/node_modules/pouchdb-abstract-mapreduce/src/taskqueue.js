/**
 * Simple task queue to sequentialize actions.
 *
 * Assumes callbacks will eventually fire (once).
 */
export default class TaskQueue {
  constructor() {
    this.promise = Promise.resolve();
  }

  add(promiseFactory) {
    this.promise = this.promise
      // just recover
      .catch(function () { })
      .then(promiseFactory);
    return this.promise;
  }

  finish() {
    return this.promise;
  }
}
